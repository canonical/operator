---
name: test-secrets
type: charm
title: Test secrets
summary: Test secrets
description: A charm to test the fidelity of Ops API for Juju secrets.

# Juju series 3.1, 3.2, and 3.3 don't officially support 24.04 base
base: ubuntu@22.04
platforms:
    amd64:

parts:
    test-secrets:
        source: .
        plugin: uv
        build-snaps: [astral-uv]

actions:
    add-secret:
    add-with-meta:
        params:
            fields:
                type: string
                description: comma-separated list of metadata fields to set
    set-secret-flow:
        params:
            # Either id or label must be set
            secretid:
                type: string
                description: optional, id of the secret to operate on
            secretlabel:
                type: string
                description: optional, label of the secret to operate on
            flow:
                type: string
                description: data or metadata fields to set, in order
